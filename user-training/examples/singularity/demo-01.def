Bootstrap: docker

From: ubuntu 


%help

Supermagic is a MPI sanity check - https://github.com/hpc/supermagic

#%setup


#%files


%labels

    Maintainer Jordi Blasco (hpcnow.com)

    Version v1.0


#%environment


%post

    echo "Creating required mount points"
    mkdir /scratch
    mkdir /checkpoint

    echo "Installing Development Tools group"
    apt-get update && apt-get install -y --no-install-recommends \
        apt-utils \
        build-essential \
        wget \
        curl \
        git \
        libopenblas-dev \
        libcurl4-openssl-dev \
        libfreetype6-dev \
        libpng-dev \
        libzmq3-dev \
        python-pip \
        pkg-config \
        python-dev \
        python-setuptools \
        rsync \
        software-properties-common \
        unzip \
        vim \
        zip \
        zlib1g-dev
    apt-get clean

    echo "Installing OpenMPI into container..."
    #git clone https://github.com/open-mpi/ompi.git
    wget https://download.open-mpi.org/release/open-mpi/v4.0/openmpi-4.0.0.tar.gz
    tar -zxf openmpi-4.0.0.tar.gz
    cd openmpi-4.0.0
    #./autogen.pl
    ./configure --prefix=/usr/local
    make
    make install
#    /usr/local/bin/mpicc examples/ring_c.c -o /usr/bin/mpi_ring


#%runscript

#    echo "Rooooar!"
#    echo "Arguments received: $*"
#    exec echo "$@"

#%test

#    /usr/local/bin/mpirun --allow-run-as-root /usr/bin/mpi_test
